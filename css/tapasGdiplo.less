@import "common.less";

.tapas-generic.diplomatic {
  
  
  //  MIX-INS
  
  .intervention() {
    display: inline;
    .italic;
  }
  .intervention-after(@content: '') {
    &:after {
      .intervention();
      content: @content;
    }
  }
  .intervention-before(@content: '') {
    &:before {
      .intervention();
      content: @content;
    }
  }
  
  
  // RULESETS
  
  add {
    background: @highlightyellow;
    
    [hand]:hover {
      .intervention-before("(Added by: " attr(hand) " ) ");
    }
  } // add
  
  choice {
    
    orig, sic, abbr {
      border-bottom: @hoverunderline;
    }
    
    reg, corr, expan {
      border: @noteborder;
      padding: @boxpadding;
      .hide;
      background: @whitebackground;
    }
    
    &:hover {
      
      reg, corr, expan {
        display: inline;
      }
    } // choice:hover
  } // choice

  del {
    text-decoration: line-through;
  }
  
  supplied, gap {
    border-bottom: @hoverunderline;
    .intervention-before("[");
    .intervention-after("]");
  } // supplied, gap

  supplied:hover {
    .intervention-before("[(Text supplied: " attr(reason) ") ");
  }
  
  gap {
    .intervention-after("(Unclear text)]");
    
    &[reason] {
      .intervention-after("(Gap reason: " attr(reason) ")]");
      
      &[unit] {
        
        &[extent] {
          .intervention-after("(Gap of " attr(extent) " " attr(unit) "; reason: " attr(reason) ")]");
        } // gap[reason][unit][extent]
    
        &[quantity] {
          .intervention-after("(Gap of " attr(quantity) " " attr(unit) "; reason: " attr(reason) ")]");
        } // gap[reason][unit][quantity]
      } // gap[reason][unit]
    } // gap[reason]
  } // gap

  lb:after {
    content: '\a' ;
    white-space: pre;
  }

  milestone {
    background: @greybackground;
    
    &[n] {
      .intervention-before(attr(n));
      
      &[unit] {
        .intervention-before(attr(unit) " " attr(n));
      }
    } // milestone[n]
  } // milestone

  subst {
    background: @whitebackground;
    padding: @boxpadding;
    border: @noteborder;
  }

  unclear {
    padding-bottom: @boxpadding;
    border-bottom: @heavyhoverunderline;
    background: @highlightblue;
    
    &:hover {
      .intervention-before(" (Unclear text) ");
    }
    
    &[reason]:hover {
      .intervention-before(" (Unclear text: " attr(reason) ") ");
    }
  } // unclear


  .-teibp-pb {
    .tapas-generic .pb;
    padding: 0.2em;
    margin: 2em 0;
    background-color: #DDD;
    color: #888;
    font-family: @sans-font-family;
    
    a {
      .intervention-before("Page");
      
      &:hover {
        text-decoration: none;
        color: @linkgrey;
      }
      
      &[data-tei-n] {
        .intervention-before("Page " attr(data-tei-n));
      }
      
      &.gallery-facs {
        
        &:before {
          content: " ";
        }
        
        .-teibp-thumbnail {
          padding: 0.2em;
        }
      } // a.gallery-facs
    } // a
  } // .-teibp-pb
} // .tapas-generic.diplomatic
